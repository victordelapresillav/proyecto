{"ast":null,"code":"import _objectSpread from\"/workspaces/proyecto/Proyecto-main/Proyecto-main/auakan/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/workspaces/proyecto/Proyecto-main/Proyecto-main/auakan/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import{fetchData}from\"../Util/Client\";import styles from\"./PublishDetails.module.css\";import BotonPublicar from\"../components/BotonPublicar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function PublishDetails(){var _useParams=useParams(),id=_useParams.id;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),item=_useState4[0],setItem=_useState4[1];useEffect(function(){fetchData().then(function(result){var filteredData=result.filter(function(item){return item.id===id;});var updatedData=filteredData.map(function(item){return _objectSpread(_objectSpread({},item),{},{publicado:localStorage.getItem(\"publicado_\".concat(item.id))===\"true\"});});setData(updatedData);}).catch(function(error){console.error(\"Error fetching data:\",error);});},[id]);var handlePublicar=function handlePublicar(itemId){var updatedData=data.map(function(item){if(item.id===itemId){localStorage.setItem(\"publicado_\".concat(itemId),\"true\");return _objectSpread(_objectSpread({},item),{},{publicado:true});}return item;});setData(updatedData);};var handleRetirar=function handleRetirar(itemId){var updatedData=data.map(function(item){if(item.id===itemId){localStorage.setItem(\"publicado_\".concat(itemId),\"false\");return _objectSpread(_objectSpread({},item),{},{publicado:false});}return item;});setData(updatedData);};return/*#__PURE__*/_jsx(\"div\",{className:styles.DetailsContainer,children:data.map(function(item){var imageUrls=item.fotografia_prod;// Convertir la cadena en un array de URLs\nif(typeof imageUrls===\"string\"){imageUrls=JSON.parse(imageUrls);}return/*#__PURE__*/_jsxs(\"div\",{className:styles.cardContainer,children:[imageUrls.map(function(imageUrl,index){return/*#__PURE__*/_jsx(\"img\",{className:styles.publicimage,src:imageUrl,alt:item.nombre},index);}),/*#__PURE__*/_jsxs(\"div\",{className:styles.pubdet,children:[/*#__PURE__*/_jsxs(\"p\",{className:styles.firstItem,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Producto: \"}),item.nombre_prod]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Detalles del producto: \"}),item.detalles_prod]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Nombre del vendedor: \"}),item.nombre]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(BotonPublicar,{tarjetaId:item.id,publicado:item.publicado,onPublicar:handlePublicar,onRetirar:handleRetirar})})]},item.id);})});}","map":{"version":3,"names":["React","useEffect","useState","useParams","fetchData","styles","BotonPublicar","jsx","_jsx","jsxs","_jsxs","PublishDetails","_useParams","id","_useState","_useState2","_slicedToArray","data","setData","_useState3","_useState4","item","setItem","then","result","filteredData","filter","updatedData","map","_objectSpread","publicado","localStorage","getItem","concat","catch","error","console","handlePublicar","itemId","handleRetirar","className","DetailsContainer","children","imageUrls","fotografia_prod","JSON","parse","cardContainer","imageUrl","index","publicimage","src","alt","nombre","pubdet","firstItem","nombre_prod","detalles_prod","tarjetaId","onPublicar","onRetirar"],"sources":["/workspaces/proyecto/Proyecto-main/Proyecto-main/auakan/src/pages/PublishDetails.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { fetchData } from \"../Util/Client\";\nimport styles from \"./PublishDetails.module.css\";\nimport BotonPublicar from \"../components/BotonPublicar\";\nexport function PublishDetails() {\n  const { id } = useParams();\n  const [data, setData] = useState([]);\n  const [item, setItem] = useState(null);\n  useEffect(() => {\n    fetchData()\n      .then((result) => {\n        const filteredData = result.filter((item) => item.id === id);\n        const updatedData = filteredData.map((item) => ({\n          ...item,\n          publicado: localStorage.getItem(`publicado_${item.id}`) === \"true\",\n        }));\n        setData(updatedData);\n      })\n      .catch((error) => {\n        console.error(\"Error fetching data:\", error);\n      });\n  }, [id]);\n  const handlePublicar = (itemId) => {\n    const updatedData = data.map((item) => {\n      if (item.id === itemId) {\n        localStorage.setItem(`publicado_${itemId}`, \"true\");\n        return {\n          ...item,\n          publicado: true,\n        };\n      }\n      return item;\n    });\n    setData(updatedData);\n  };\n  const handleRetirar = (itemId) => {\n    const updatedData = data.map((item) => {\n      if (item.id === itemId) {\n        localStorage.setItem(`publicado_${itemId}`, \"false\");\n        return {\n          ...item,\n          publicado: false,\n        };\n      }\n      return item;\n    });\n    setData(updatedData);\n  };\n  return (\n    <div className={styles.DetailsContainer}>\n      {data.map((item) => {\n        let imageUrls = item.fotografia_prod;\n        // Convertir la cadena en un array de URLs\n        if (typeof imageUrls === \"string\") {\n          imageUrls = JSON.parse(imageUrls);\n        }\n        return (\n          <div key={item.id} className={styles.cardContainer}>\n            {imageUrls.map((imageUrl, index) => (\n              <img key={index} className={styles.publicimage} src={imageUrl} alt={item.nombre} />\n            ))}\n            <div className={styles.pubdet}>\n              <p className={styles.firstItem}>\n                <strong>Producto: </strong>\n                {item.nombre_prod}\n              </p>\n              <p>\n                <strong>Detalles del producto: </strong>\n                {item.detalles_prod}\n              </p>\n              <p>\n                <strong>Nombre del vendedor: </strong>\n                {item.nombre}\n              </p>\n            </div>\n            <div>\n              <BotonPublicar\n                tarjetaId={item.id}\n                publicado={item.publicado}\n                onPublicar={handlePublicar}\n                onRetirar={handleRetirar}\n              />\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}